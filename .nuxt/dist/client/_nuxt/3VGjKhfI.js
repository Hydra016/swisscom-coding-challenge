import{a3 as N,a5 as k}from"./RPqdvl64.js";import{i as O,r as _}from"./CBI1CQ2I.js";function g(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var B=function(){return _.Date.now()};const v=B;var F=/\s/;function L(t){for(var e=t.length;e--&&F.test(t.charAt(e)););return e}var M=/^\s+/;function j(t){return t&&t.slice(0,L(t)+1).replace(M,"")}var C=NaN,U=/^[-+]0x[0-9a-f]+$/i,X=/^0b[01]+$/i,D=/^0o[0-7]+$/i,H=parseInt;function R(t){if(typeof t=="number")return t;if(O(t))return C;if(g(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=g(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=j(t);var i=X.test(t);return i||D.test(t)?H(t.slice(2),i?2:8):U.test(t)?C:+t}var P="Expected a function",Y=Math.max,q=Math.min;function z(t,e,i){var a,s,h,f,r,u,c=0,I=!1,l=!1,p=!0;if(typeof t!="function")throw new TypeError(P);e=R(e)||0,g(i)&&(I=!!i.leading,l="maxWait"in i,h=l?Y(R(i.maxWait)||0,e):h,p="trailing"in i?!!i.trailing:p);function T(n){var o=a,d=s;return a=s=void 0,c=n,f=t.apply(d,o),f}function S(n){return c=n,r=setTimeout(m,e),I?T(n):f}function W(n){var o=n-u,d=n-c,E=e-o;return l?q(E,h-d):E}function b(n){var o=n-u,d=n-c;return u===void 0||o>=e||o<0||l&&d>=h}function m(){var n=v();if(b(n))return y(n);r=setTimeout(m,W(n))}function y(n){return r=void 0,p&&a?T(n):(a=s=void 0,f)}function $(){r!==void 0&&clearTimeout(r),c=0,a=u=s=r=void 0}function A(){return r===void 0?f:y(v())}function x(){var n=v(),o=b(n);if(a=arguments,s=this,u=n,o){if(r===void 0)return S(u);if(l)return clearTimeout(r),r=setTimeout(m,e),T(u)}return r===void 0&&(r=setTimeout(m,e)),f}return x.cancel=$,x.flush=A,x}var G="Expected a function";function J(t,e,i){var a=!0,s=!0;if(typeof t!="function")throw new TypeError(G);return g(i)&&(a="leading"in i?!!i.leading:a,s="trailing"in i?!!i.trailing:s),z(t,e,{leading:a,maxWait:e,trailing:s})}const V=class{constructor(t){N(this,t),this.artists=[],this.loading=!1,this.fetchThrottled=J(this.fetch,500)}onChange(t){this.loading=!0,this.fetchThrottled(t)}fetch(t){if(this.artists=[],t.length<3){this.loading=!1;return}fetch(`https://itunes.apple.com/search?term=${encodeURI(t)}&entity=musicArtist&limit=10`,{method:"post"}).then(e=>e.json()).then(e=>this.artists=e.results.map(i=>i.artistName)).then(()=>setTimeout(()=>{this.loading=!1},100))}render(){return k("sdx-select",{key:"452590eb97b00fd210c33b01553fbed44ed107c1",label:"Your favourite artist on iTunes",placeholder:"Search artistsâ€¦",onInput:t=>{const e=t.target.value;this.onChange(e[0])},keyboardBehavior:"autocomplete",filterFunction:()=>!0,loading:this.loading},this.artists.map(t=>k("sdx-select-option",null,t)))}};export{V as sdx_itunes_autocomplete};
