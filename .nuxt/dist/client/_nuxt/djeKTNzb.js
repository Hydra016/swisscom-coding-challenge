import{a3 as n,a5 as a,a7 as r}from"./RPqdvl64.js";import{b as c,A as l,c as d,t as h}from"./DrTE1gcP.js";const m=":host,*,*:before,*:after{box-sizing:border-box}@keyframes slide-in{to{transform:translateX(-100%)}}@keyframes fade-out{from{opacity:1}to{opacity:0}}.component{position:relative;height:0;width:0}.component .toast{position:absolute;opacity:0;max-height:300px;overflow-y:auto;min-width:312px;padding:16px 46px 16px 16px;border:1px solid #fff;border-radius:12px}.component .toast.slide-in{opacity:1;animation:slide-in forwards cubic-bezier(0.4, 0, 0.2, 1)}.component .toast.slide-in.animated{animation-duration:450ms;transition:top 450ms cubic-bezier(0.4, 0, 0.2, 1)}.component .toast.fade-out{animation:fade-out forwards;transform:translateX(-100%) !important}.component .toast.fade-out.animated{animation-duration:500ms}.component .toast.general{background-color:#086adb}.component .toast.confirmation{background-color:#1b8712}.component .toast.warning,.component .toast.alert{background-color:#cf4a0c}.component .toast .close-button{position:absolute;top:10px;right:10px}.component.sdx--dark-theme .toast{border-color:#141414}.component.sdx--dark-theme .toast.general{background-color:#0a71e9}.component.sdx--dark-theme .toast.confirmation{background-color:#1c8912}.component.sdx--dark-theme .toast.warning,.component.sdx--dark-theme .toast.alert{background-color:#ce4a0c}",p=m,e=class{constructor(t){n(this,t),this.toastsWithEl=new Map,this.prevToasts=this.toasts,this.toastsDidChange=!1,this.toasts=[],this.animated=!0}toastsChanged({},t){this.toastsDidChange=!0,this.prevToasts=t}componentWillUpdate(){if(this.toastsDidChange){const t=this.prevToasts.find(o=>!this.toasts.includes(o));t&&this.toastsWithEl.get(t)&&this.setTop()}}componentDidUpdate(){if(this.toastsDidChange){const t=this.toasts.find(o=>!this.prevToasts.includes(o)),s=t&&this.toastsWithEl.get(t);s&&(this.setTop(),c.set(s,{transform:`translateX(${document.documentElement.offsetWidth-this.el.getBoundingClientRect().x})`}),s.classList.add("slide-in"),this.closeAfterTimeout(s)),this.toastsDidChange=!1}}async showToast(t){const s={...t,label:`${Date.now()}`};this.toasts=[...this.toasts,s]}hideToast(t){this.toasts=this.toasts.filter((...s)=>s[0]!==t)}close(t){t==null||t.classList.add("fade-out")}closeAfterTimeout(t){setTimeout(()=>{this.close(t)},e.timeToClose+e.slideInDuration)}setTop(){let t=0;this.toasts.slice().reverse().forEach(o=>{const i=this.toastsWithEl.get(o);i&&(i.style.top=`${t}px`,t+=i.clientHeight+e.spaceBetweenToasts)})}onAnimationEnd(t,s){t.animationName==="fade-out"&&(this.toasts=this.toasts.filter((...o)=>o[0]!==s))}onUndoClick(t){const s={...t};delete s.label,l(this.el,t.eventMapping.click,s),this.close(this.toastsWithEl.get(t))}getComponentClassNames(){return{component:!0,[d(this.el)]:!0}}getToastClassNames(t){return{toast:!0,[t.type||"general"]:!0,animated:this.animated}}render(){return this.toastsWithEl.clear(),a("div",{key:"1e76821dfcd9bb7e674ec86294c7bfe2bf3b0361",class:this.getComponentClassNames(),"aria-live":"assertive"},this.toasts.map(t=>{var s;return a("div",{class:this.getToastClassNames(t),onAnimationEnd:o=>this.onAnimationEnd(o,t),key:t.label,ref:o=>this.toastsWithEl.set(t,o)},a("sdx-card",{layout:"inline-notification",background:"dark","notification-type":t.type,filledIcon:!1},t.description,((s=t.eventMapping)===null||s===void 0?void 0:s.click)&&a("sdx-button",{class:"transparent",size:"small",label:h("Undo",this.el.lang),background:"dark",slot:"interaction",onClick:()=>this.onUndoClick(t)})),a("sdx-button",{class:"close-button",theme:"transparent",background:"dark",iconName:"icon-close",iconSize:2,onClick:()=>this.hideToast(t)}))}))}get el(){return r(this)}static get watchers(){return{toasts:["toastsChanged"]}}};e.spaceBetweenToasts=16;e.slideInDuration=450;e.timeToClose=6e3;e.style=p;export{e as sdx_toasts};
